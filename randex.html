<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ex</title>
</head>
<body>
    
    <div class="ex">
        <b>10초 안에 모두풀어주세요 (4문제 미만 탈락)</b>
        <div>
            <p>시작 버튼을 누르면 문제가 출시됩니다</p>
        </div>
        <ul>
        </ul>
        <button>시작</button>
    </div>

    <style>
        *{box-sizing: border-box;}
        .ex {width: 500px; margin: 100px auto 0; border: 1px solid black; text-align: center; font-size: 20px;}
        .ex > ul{margin: 0; padding: 0; list-style-type: none;}
        .ex ul li{padding: 10px 0;}
        .ex button{width: 100%;font-size: 20px;}
        .ex >div{width: 500px; margin: 0; border: 1px solid black; background-color: gray;}
        .ex div >p{width:100%; color: white; font-weight: 500; text-align: center; margin: 0; }
    </style>

    <script>

        const   leul = document.querySelector('.ex ul'), lep = document.querySelector('.ex div p'),
                lebut = document.querySelector('.ex button');

        let n=0, time;

    const timer = function(){
        time = setInterval(function(){
                n++;
                if(n <= 10){
                    lep.style = `width:${n}0%; background-color: green;`
                    lep.innerHTML = `${11-n}`
                }
                if(n == 11){
                    lep.style =`width:100%; background-color: red;`
                    lep.innerHTML = `0`
                    clearInterval(time);
                    reg();

                }

            },1000);
    };



        let a1= function(){return Math.round(Math.random()*10)} , a2 = function(){return Math.round(Math.random()*10)}
            y1=0, y2=0;

        let total = [];

        // for(let i=1; i<=5; i++){

        //     y1 = a1(); y2 = a2();
        //     leul.innerHTML += `<li><label>${y1} + ${y2} = <input type="text"></label></li>`

        //     total.push(y1 + y2)
        // };
        


            lebut.onclick = function(){
                let int = lebut.innerText;
                console.log( int );
                n=0;
                clearInterval(time);


                if(int == '시작'){
                    lebut.innerText = '종료'
                    leul.innerHTML = '';
                    timer()
                        for(let i=1; i<=5; i++){

                            y1 = a1(); y2 = a2();
                            leul.innerHTML += `<li><label>${y1} + ${y2} = <input type="text"><span></span></label></li>`

                            total.push(y1 + y2)
                        };
                    
                }else{
                    reg();
                    
                }



            }

        let count

        function reg (){
            const elinput = document.querySelectorAll('.ex li input'),
                elspan = document.querySelectorAll('.ex li span')
            

            count = 0;

            elinput.forEach(function(v,k){

                if(total[k] == elinput[k].value){
                    count++;
                    elspan[k].innerHTML =` O`
                }else{
                    elspan[k].innerHTML =` X`
                }

            })
            setTimeout(regg,100);//0.1초후에 실행하라
            
        };
        
        function regg(){
            if(count >= 4){
                alert (`축하합니다 통과하셧습니다`)
                }else{
                alert ('아쉽습니다 다시한번?')
                };
                location.reload();
        };






    </script>
</body>
</html>